---
layout: post
title: Random Number Generation in C++
categories:
  - Programming
tags:
  - C++
last_modified_at: 2018-02-14T09:55:59-05:00
---

The production of random numbers has always been important for computers applications. Neverthless, the C++ STL has historically provided rather limited support, all of it adopted from the C standard library.

* RAND_MAX, a macro that expands to an integer constant;
* std::rand(), a function that produces a pseudo-random number in the closed interval [0, RAND_MAX];
* std::srand(), a function to initialize (seed) a new sequence of such numbers.

The random functions introduced with C++11 improved enormously the way to generate random numbers in c++. Unfortunatly, the procedure and the code needed to perform such task is not straightforward and require a little bit of knowledge. The generation of random numbers involve two different objects: 

* an engine returning unpredictable numbers, so that for each bit the likelihood of getting 0 is always the same as the likelihood of getting a 1;

* a distribution transforming the sequence of numbers generated by an engine in order to fit a certain random variable distribution. 

Given an engine variable e and a distribution variable d, each call d(e) produces a random number according to the distribution. In other words, the engine variable provides a source of randomness and the distribution variable shapes this source to fit the distribution. The following code implements a simple function that simulates the launch of two dice generates a random integer according to uniform distribution:

{% highlight cpp %}  

#include <random>
  
int two_dice ( )
{
   std::default_random_engine e{};
   std::uniform_int_distribution<int> d{1, 12};
   return d(e);
}

{% endhighlight %}  


Every engine shall be always initialized through a value that is the starting point or seed of the generated sequences. In the example above the engine was default-initialized, but it is also possible to provide an explicit starting value (a seed) to its constructor: 

{% highlight cpp %} 
   std::default_random_engine e{121181};
{% endhighlight %} 

When a program is run multiple times, an engine will always produce the same sequence if it is always initialized with the same seed. Even if this behaviour can be very useful while debugging a program, in many contexts it is undesireable and problematic. The best way to avoid replicated sequences is to use an object of type random_device to obtain a seed:

{% highlight cpp %} 
std::random_device         rdev{};
std::default_random_engine e{rdev()};
{% endhighlight %} 

use random_device once to seed the random number generator named mt. random_device() is slower than mt19937, but it does not need to be seeded because it requests random data from your operating system
